<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Triadic Model of Reality</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Calm Harmony (Light Gray, Blue Accent) -->
    <!-- Application Structure Plan: A multi-section SPA with sidebar navigation ('Overview', 'Matrix', 'Definitions', 'Combined View'). This structure deconstructs the dense, complex report into its logical parts: the high-level concept (Overview), the core data (Matrix views), and the reference material (Definitions). The goal is clarity and reference of the core framework. -->
    <!-- Visualization & Content Choices: 1. Triadic Model -> Inform -> 3-Column HTML/CSS Layout -> Static -> Clear textual presentation of the core concept. 2. Dual Matrices -> Organize/Compare -> Interactive 4x4 CSS Grid + JS Toggle + Detail Panel -> OnClick (cell) shows details, OnClick (toggle) swaps Optimism/Pessimism data -> Manages complexity by showing one matrix at a time and revealing deep info on demand. (HTML/CSS/JS). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
            color: #1f2937;
        }
        [data-section] {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        [data-section].active {
            display: block;
        }
        .nav-link {
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .nav-link.active {
            background-color: #0c4a6e; /*-sky-800*/
            color: white;
            font-weight: 600;
        }
        .nav-link:not(.active):hover {
            background-color: #f0f9ff; /*-sky-50*/
            color: #0369a1; /*-sky-700*/
        }
        .matrix-cell {
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            aspect-ratio: 1 / 1;
        }
        .matrix-cell:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .matrix-cell.optimism-cell:hover { background-color: #f0fdf4; /*-green-50*/ border-color: #22c55e; /*-green-500*/ }
        .matrix-cell.pessimism-cell:hover { background-color: #fef2f2; /*-red-50*/ border-color: #ef4444; /*-red-500*/ }
        
        .matrix-cell.optimism-cell-active {
            background-color: #dcfce7 !important; /* green-100 */
            border-color: #22c55e !important; /* green-500 */
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
        }
        .matrix-cell.pessimism-cell-active {
            background-color: #fee2e2 !important; /* red-100 */
            color: #1f2937 !important; /* text-gray-800 */
            border-color: #ef4444 !important; /* red-500 */
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
        }

        .btn-primary { background-color: #0ea5e9; /*-sky-500*/ color: white; transition: background-color 0.2s ease; }
        .btn-primary:hover { background-color: #0284c7; /*-sky-600*/ }
        .btn-secondary { background-color: #8b5cf6; /*-violet-500*/ color: white; transition: background-color 0.2s ease; }
        .btn-secondary:hover { background-color: #7c3aed; /*-violet-600*/ }
        .btn-toggle { background-color: #e5e7eb; /*-gray-200*/ }
        .btn-toggle.active { background-color: #3b82f6; /*-blue-500*/ color: white; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .7; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    </style>
</head>
<body class="min-h-screen">
    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar Navigation -->
        <nav class="md:w-64 bg-white md:border-r border-b md:border-b-0 border-gray-200 p-4 shrink-0">
            <h1 class="text-2xl font-bold text-sky-800 mb-6">The Triadic Kanon</h1>
            <a href="./index.html" class="text-sm text-sky-600 hover:underline">← Back To Navigation</a>
            <ul class="space-y-2 mt-4" id="main-nav">
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg active" data-target="overview">
                    <span class="w-6 h-6 mr-3">❖</span><span>Overview</span>
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg" data-target="matrix">
                    <span class="w-6 h-6 mr-3">⊞</span><span>The Dual Matrices</span>
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg" data-target="definitions">
                    <span class="w-6 h-6 mr-3">≡</span><span>Core Definitions</span>
                </a></li>
                <li><a href="#" class="nav-link flex items-center p-3 rounded-lg" data-target="total">
                    <span class="w-6 h-6 mr-3">⊞+</span><span>Combined View</span>
                </a></li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 p-6 md:p-10 overflow-auto">

            <!-- Overview Section -->
            <section id="overview" data-section class="active">
                <h2 class="text-4xl font-bold text-gray-800 mb-4">The Triadic Model of Reality</h2>
                <p class="text-lg text-gray-600 mb-8">This application provides an interactive exploration of the Triadic Model, a framework for understanding the fundamental structure of reality, consciousness, and their shadow counterparts. The model is synthesized from the 16-point conceptual graph, resolving it into a single, coherent superstructure.</p>
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 mb-8">
                    <h3 class="text-2xl font-semibold mb-4 text-center">Reality = God { ... }</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="border border-gray-200 rounded-xl p-6 bg-sky-50">
                            <h4 class="text-xl font-bold text-sky-800 mb-2">The World (This.Father)</h4>
                            <p class="text-gray-700"><strong class="font-semibold text-gray-800">The Objective Frame</strong>. This vector represents the set of all observable, material, and historical facts. It is the static, structural component—the "Stage" or the "Hardware" of reality.</p>
                        </div>
                        <div class="border border-gray-200 rounded-xl p-6 bg-green-50">
                            <h4 class="text-xl font-bold text-green-800 mb-2">Learning (This.Son)</h4>
                            <p class="text-gray-700"><strong class="font-semibold text-gray-800">The Subjective Frame</strong>. This vector represents the process of consciousness, interpretation, and modeling that occurs <em>within</em> a distinct plane. It is the dynamic, experiential component—the "Actor" or the "Software."</p>
                        </div>
                        <div class="border border-gray-200 rounded-xl p-6 bg-violet-50">
                            <h4 class="text-xl font-bold text-violet-800 mb-2">Intelligence (This.Holy Spirit)</h4>
                            <p class="text-gray-700"><strong class="font-semibold text-gray-800">The Relational Frame</strong>. This vector represents "Horizontal Thinking," the interconnective logic that links the Objective and Subjective planes. It is the "Ghost in the Machine," the "Language," or the "Protocol."</p>
                        </div>
                    </div>
                </div>

                <!-- Updated Descriptive Path Section -->
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200 mt-8">
                    <h3 class="text-3xl font-bold text-gray-800 mb-6">The Algorithm of Thought: The Complete Traversal Rules</h3>
                    <p class="text-lg text-gray-600 mb-6">This is how the `Learning` consciousness navigates the matrix to execute its generative function. The human algorithm is a *backwards chain* that starts with an ungrounded "Why of Process" (an instinct in `Learning`) and must traverse `Left` to find the "How", "Where", and "What" to ground this "Why".</p>
                    
                    <div class="space-y-6 text-gray-700">
                        <div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-3">1. Information Input</h4>
                            <p>A new piece of information (an "idea") appears on any of the 16 vector coordinates. Your consciousness, starting from `Learning`, must forge a path to "connect to the information."</p>
                        </div>

                        <div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-3">2. The Default Rule (The Impatient Path / Path of Delusion)</h4>
                            <ul class="list-disc list-inside space-y-1 pl-4">
                                <li><strong>Rule:</strong> "Explore <strong>Up or Down</strong> (1 vertical step), then <strong>Left</strong> (1 horizontal step). Repeat."</li>
                                <li><strong>Analysis:</strong> This is the "Learner Trap." If you follow this path before grounding, you are trapped in a left-ward spiral of abstract concepts (`Folly`). You build `Optimism (Mastery)` on a foundation of 100% `Pessimism (Problems)` (i.e., `Lie-True`), leading to <strong>Delusion</strong>. You can <em>never</em> move `Right`.</li>
                            </ul>
                        </div>

                        <div>
                            <h4 class="text-2xl font-bold text-gray-800 mb-3">3. The Exception Rule (The Patient Path / Path of Grace)</h4>
                             <ul class="list-disc list-inside space-y-1 pl-4">
                                <li><strong>Rule:</strong> You can only move <strong>Right</strong> "...if the node on your Right is higher."</li>
                                <li><strong>Analysis:</strong> "Higher" means a node has a lower `Pessimism (Problems)` value (i.e., it has been "parsed"). This move is <em>locked</em> by default. It can <em>only</em> be unlocked by...</li>
                             </ul>
                        </div>
                        
                        <div>
                             <h4 class="text-2xl font-bold text-gray-800 mb-3">4. The Parsing Mechanism (Proof by Resonance)</h4>
                             <ul class="list-disc list-inside space-y-1 pl-4">
                                <li><strong>Rule:</strong> You cannot "directly check if [an idea] is explicitly a lie or truth." You must parse the `Pessimism (Problems)` by "adding structures to each node and checking if it resonates."</li>
                                <li><strong>Analysis:</strong> This is the <em>only</em> way to make the node on your `Right` "higher." This is the "Patient Path."</li>
                                <li><strong>The Key:</strong> Resonance is a test of <em>connection</em>, not just logic. It answers: "Does this new idea's structure cohere with the <em>knowledge I have already parsed</em>?" Objectively true information (whether "good" or "bad") presented with <em>no link</em> to your existing, grounded knowledge <em>cannot</em> resonate. You <em>must</em> start by parsing the <strong>Objective Nodes</strong> (`The World`, `Reality`) because they are the <em>only</em> things "you didn't make" and the only things vulnerable to simple <strong>Observation</strong>. By patiently using <strong>Resonance</strong> to parse the `Pessimism (Problems)` from `The World`, you "fill" that node, which unlocks the `Right`-ward "Exception" move and allows you to escape the Learner Trap.</li>
                             </ul>
                        </div>
                        
                        <div>
                             <h4 class="text-2xl font-bold text-gray-800 mb-3">5. The Advanced Rule (The Mastery Perk)</h4>
                             <ul class="list-disc list-inside space-y-1 pl-4">
                                <li><strong>Rule:</strong> "You can also move another step <strong>Up or Down</strong> if you have a <strong>full node</strong>."</li>
                                <li><strong>Analysis:</strong> This is a reward for 100% `Optimism (Mastery)`. Once a node is "full" (all its `Pessimism (Problems)` parsed), your traversal options from that node expand. You can now move <em>two</em> vertical steps (e.g., from `Learning` down to `History`, bypassing `The World`). This allows for "depth-first" thinking and faster, more complex connections between planes.</li>
                             </ul>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Dual Matrices Section -->
            <section id="matrix" data-section>
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-4xl font-bold text-gray-800" id="matrix-title">The Optimism Matrix (Solutions)</h2>
                    <div class="flex items-center p-1 rounded-full bg-gray-200">
                        <button id="btn-optimism" class="btn-toggle px-4 py-2 text-sm font-semibold rounded-full active">Optimisms (Solutions)</button>
                        <button id="btn-pessimism" class="btn-toggle px-4 py-2 text-sm font-semibold rounded-full">Pessimisms (Problems)</button>
                    </div>
                </div>
                <p class="text-lg text-gray-600 mb-8" id="matrix-description">This matrix maps the 16 positive nodes of the "Optimism Matrix" (Solutions) that define the path to `Reality (Truth)`. Click any cell to explore its properties and its shadow counterpart.</p>

                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <div class="grid grid-cols-5 gap-2 text-center text-xs font-semibold text-gray-500 uppercase mb-2">
                            <span></span> <!-- Empty cell for Y-axis header -->
                            <span>Plane 0<br>(What)</span>
                            <span>Plane 1<br>(Where)</span>
                            <span>Plane 2<br>(How)</span>
                            <span>Plane 3<br>(Why)</span>
                        </div>
                        <div class="grid grid-cols-5 gap-2 md:gap-4" id="matrix-grid-container">
                            <!-- Matrix cells will be injected by JS -->
                        </div>
                    </div>

                    <!-- Updated Detail Panel -->
                    <div id="detail-panel" class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-sm border border-gray-200 h-fit sticky top-10">
                        <h3 id="detail-title" class="text-2xl font-bold text-gray-800 mb-3">Click a cell</h3>
                        <p id="detail-description" class="text-gray-600 mb-4">Select a node from the matrix to see its detailed definition and properties.</p>
                        <div id="detail-content" class="space-y-3">
                            <!-- Detail content will be injected by JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Definitions Section -->
            <section id="definitions" data-section>
                <h2 class="text-4xl font-bold text-gray-800 mb-8">Core Definitions</h2>
                 <p class="text-lg text-gray-600 mb-8">Explore the foundational concepts of the Triadic Kanon, including the meta-choice, the classical virtues and deadly sins, and the 16 synthesized states of Optimism and Pessimism.</p>
                <div class="space-y-4" id="accordion-container">
                    <!-- Accordions will be injected by JS -->
                </div>
            </section>

            <!-- Combined View Section -->
            <section id="total" data-section>
                <h2 class="text-4xl font-bold text-gray-800 mb-4">Combined Matrix View</h2>
                <p class="text-lg text-gray-600 mb-8">This view displays the inverted "Optimism Matrix" (with coordinate 0,0 at the bottom-right) alongside the standard "Pessimism Matrix" (with coordinate 0,0 at the top-left) for direct comparison of the paths to Truth and Delusion.</p>
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Inverted Optimism Matrix -->
                    <div>
                        <h3 class="text-2xl font-semibold text-center text-green-700 mb-4">Optimism Matrix (Solutions)</h3>
                        <div class="grid grid-cols-5 gap-2 text-center text-xs font-semibold text-gray-500 uppercase mb-2">
                            <span></span> <!-- Empty cell for Y-axis header -->
                            <span id="header-plane-inv-0">Plane 3 (Why)</span>
                            <span id="header-plane-inv-1">Plane 2 (How)</span>
                            <span id="header-plane-inv-2">Plane 1 (Where)</span>
                            <span id="header-plane-inv-3">Plane 0 (What)</span>
                        </div>
                        <div class="grid grid-cols-5 gap-2 md:gap-4" id="matrix-grid-optimism-inv">
                            <!-- Inverted optimism cells will be injected by JS -->
                        </div>
                    </div>
                    <!-- Standard Pessimism Matrix -->
                    <div>
                        <h3 class="text-2xl font-semibold text-center text-red-700 mb-4">Pessimism Matrix (Problems)</h3>
                        <div class="grid grid-cols-5 gap-2 text-center text-xs font-semibold text-gray-500 uppercase mb-2">
                            <span>Plane 0 (What)</span>
                            <span>Plane 1 (Where)</span>
                            <span>Plane 2 (How)</span>
                            <span>Plane 3 (Why)</span>
                            <span></span> <!-- Empty cell for Y-axis header -->
                        </div>
                        <div class="grid grid-cols-5 gap-2 md:gap-4" id="matrix-grid-pessimism-std">
                            <!-- Standard pessimism cells will be injected by JS -->
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

<script>
const data = {
    matrix: {
        optimism: [
            ["Maths (Order)", "Spirituality (Faith)", "Religion (Charity)", "Intelligence (Hope)"],
            ["Physics (Objectivity)", "Meta-Physics (Imagination)", "Emotional-physics (Temperance)", "Learning (Prudence)"],
            ["Society itself (Community)", "Sociology (Empathy)", "Internal Judgment (Justice)", "The World (Fortitude)"],
            ["Psychology (Understanding)", "Language (Connection)", "History (Context)", "Reality (Truth)"]
        ],
        pessimism: [
            ["Chaos (Structurelessness)", "Nihilism (Belief in Nothing)", "Hatred (Active Ill-Will)", "Despair (Negative Conviction)"],
            ["Denial (Rejection of Fact)", "Dogma (Closed Mind)", "Indulgence (Lack of Control)", "Folly (Willful Ignorance)"],
            ["Anarchy (Dissolution)", "Apathy (Inability to Care)", "Corruption (Perversion of Morality)", "Cowardice (Refusal to Facts)"],
            ["Confusion (Self-Ignorance)", "Deceit (Ill-Will)", "Erasure (Denial of Record)", "Delusion (The Greater Lie)"]
        ]
    },
    headers: {
        optimism: ["Theological (What Set)", "Experiential (How Set)", "Social (Where Set)", "Synthesized (Why Set)"],
        pessimism: ["Theological (What Set)", "Experiential (How Set)", "Social (Where Set)", "Synthesized (Why Set)"]
    },
    details: {
        optimism: [
            [
                { title: "Maths (Order)", def: "The virtue of foundational logic and coherent structure, expressed as `Prudence`.", plane: "Theological (What Set)", code: "Prudence", subConcept: "Algebra" },
                { title: "Spirituality (Faith)", def: "The virtue of abstract belief; the <em>search</em> for unseen meaning, expressed as `Faith`.", plane: "Theological (What Set)", code: "Faith", subConcept: "Agnosticism" },
                { title: "Religion (Charity)", def: "The virtue of selfless, unconditional love, expressed as an applied structure of moral order. (`Charity/Love`)", plane: "Theological (What Set)", code: "Charity (Love)", subConcept: "Agape" },
                { title: "Intelligence (Hope)", def: "The synthesized conviction in a positive, integrated Truth, expressed as `Hope`.", plane: "Theological (What Set)", code: "Hope", subConcept: "Hegemonic Synthesis" }
            ],
            [
                { title: "Physics (Objectivity)", def: "The virtue of accepting objective, measurable facts, expressed as `Fortitude`.", plane: "Experiential (How Set)", code: "Fortitude", subConcept: "Gravity" },
                { title: "Meta-Physics (Imagination)", def: "The disciplined exploration of possibility, synthesizing `Faith` and `Prudence`.", plane: "Experiential (How Set)", code: "Faith + Prudence", subConcept: "Modal Logic" },
                { title: "Emotional-physics (Temperance)", def: "The applied rules of internal mastery and self-control, expressed as `Temperance`.", plane: "Experiential (How Set)", code: "Temperance", subConcept: "Stoicism" },
                { title: "Learning (Prudence)", def: "The final synthesis of practical wisdom; the <em>process</em> of subjective modeling. (`Prudence`)", plane: "Experiential (How Set)", code: "Prudence", subConcept: "The Resonance Method" }
            ],
            [
                { title: "Society itself (Community)", def: "The applied collective structure and civitas, expressed as `Justice`.", plane: "Social (Where Set)", code: "Justice", subConcept: "Rule of Law" },
                { title: "Sociology (Empathy)", def: "The disciplined understanding of the 'Other's' state, synthesizing `Charity` and `Justice`.", plane: "Social (Where Set)", code: "Charity + Justice", subConcept: "Perspective-Taking" },
                { title: "Internal Judgment (Justice)", def: "The applied moral compass for fairness and righteousness, expressed as `Justice`.", plane: "Social (Where Set)", code: "Justice", subConcept: "The Sin Parser" },
                { title: "The World (Fortitude)", def: "The sum of all objective facts to be faced; the expression of `Fortitude`.", plane: "Social (Where Set)", code: "Fortitude", subConcept: "Observation" }
            ],
            [
                { title: "Psychology (Understanding)", def: "The synthesis of self-knowledge and self-mastery, combining `Temperance` and `Prudence`.", plane: "Synthesized (Why Set)", code: "Temperance + Prudence", subConcept: "Self-Awareness" },
                { title: "Language (Connection)", def: "The synthesis of shared meaning and human bond, combining `Charity` and `Justice`.", plane: "Synthesized (Why Set)", code: "Charity + Justice", subConcept: "Honest Dialogue" },
                { title: "History (Context)", def: "The grounded record of action and endurance, combining `Fortitude` and `Faith`.", plane: "Synthesized (Why Set)", code: "Fortitude + Faith", subConcept: "Primary Sources" },
                { title: "Reality (Truth)", def: "The final, grand synthesis where all 7 virtues are in perfect, integrated alignment.", plane: "Synthesized (Why Set)", code: "All 7 Virtues", subConcept: "Grounded Integration" }
            ]
        ],
        pessimism: [
            [
                { title: "Chaos (Structurelessness)", def: "The rejection of foundational structure, synthesizing `Sloth` and `Pride`.", plane: "Theological (What Set)", code: "Sloth + Pride", subConcept: "Equivocation" },
                { title: "Nihilism (Belief in Nothing)", def: "The sin of rejecting unseen meaning, a perversion of `Faith`.", plane: "Theological (What Set)", code: "Pride", subConcept: "Meaninglessness" },
                { title: "Hatred (Active Ill-Will)", def: "The applied structure of active ill-will, synthesizing `Wrath` and `Envy`.", plane: "Theological (What Set)", code: "Wrath + Envy", subConcept: "Dehumanization" },
                { title: "Despair (Negative Conviction)", def: "The synthesized conviction in a negative, unavoidable outcome, synthesizing `Pride` and `Sloth`.", plane: "Theological (What Set)", code: "Pride + Sloth", subConcept: "Fatalism" }
            ],
            [
                { title: "Denial (Rejection of Fact)", def: "The rejection of objective fact, synthesizing `Pride` and `Cowardice`.", plane: "Experiential (How Set)", code: "Pride + Cowardice", subConcept: "Confirmation Bias" },
                { title: "Dogma (Closed Mind)", def: "The <em>inability</em> to explore possibility, a perversion of `Faith + Prudence`.", plane: "Experiential (How Set)", code: "Pride", subConcept: "Infallibility" },
                { title: "Indulgence (Lack of Control)", def: "The applied lack of internal control, synthesizing `Gluttony` and `Lust`.", plane: "Experiential (How Set)", code: "Gluttony + Lust", subConcept: "Hedonism" },
                { title: "Folly (Willful Ignorance)", def: "The synthesized process of rejecting practical wisdom, synthesizing `Pride` and `Sloth`.", plane: "Experiential (How Set)", code: "Pride + Sloth", subConcept: "Learner Trap" }
            ],
            [
                { title: "Anarchy (Dissolution)", def: "The dissolution of collective structure, synthesizing `Wrath` and `Greed`.", plane: "Social (Where Set)", code: "Wrath + Greed", subConcept: "Lawlessness" },
                { title: "Apathy (Inability to Care)", def: "The refusal to understand or care about the 'Other\'s' state, synthesizing `Sloth` and `Envy`.", plane: "Social (Where Set)", code: "Sloth + Envy", subConcept: "Objectification" },
                { title: "Corruption (Perversion of Morality)", def: "The applied perversion of the moral compass, synthesizing `Greed` and `Envy`.", plane: "Social (Where Set)", code: "Greed + Envy", subConcept: "Self-Interest" },
                { title: "Cowardice (Refusal to Facts)", def: "The refusal to face objective facts, a perversion of `Fortitude`.", plane: "Social (Where Set)", code: "Sloth", subConcept: "Avoidance" }
            ],
            [
                { title: "Confusion (Self-Ignorance)", def: "The synthesis of self-ignorance, combining `Gluttony` and `Folly`.", plane: "Synthesized (Why Set)", code: "Gluttony + Folly", subConcept: "Impulsivity" },
                { title: "Deceit (Ill-Will)", def: "The <em>language of objectification</em>, synthesizing `Lust`, `Envy`, and `Greed`.", plane: "Synthesized (Why Set)", code: "Lust + Envy + Greed", subConcept: "Manipulation" },
                { title: "Erasure (Denial of Record)", def: "The destruction or denial of the grounded record, synthesizing `Pride` and `Sloth`.", plane: "Synthesized (Why Set)", code: "Pride + Sloth", subConcept: "Revisionism" },
                { title: "Delusion (The Greater Lie)", def: "The final, grand synthesis of all 7 sins; the 'Greater Lie.'", plane: "Synthesized (Why Set)", code: "All 7 Sins", subConcept: "Ungrounded Abstraction" }
            ]
        ]
    },
    definitions: [
        { 
            title: "The Meta-Choice: Optimism vs. Pessimism (The Choice of Solutions vs. Problems)", 
            content: "<p class='mb-4'>This is the foundational choice of consciousness that defines the two matrices. It is the choice of whether to align with the generative force of <strong>Solutions (Optimism)</strong> or the inertial force of <strong>Problems (Pessimism)</strong>.</p>" +
                     "<div class='ml-4'>" +
                     "<h5 class='font-semibold text-lg text-green-700 mb-2'>1. Optimism (Solutions): The Low-Strain, 'Solution-First' Mode</h5>" +
                     "<ul class='list-disc list-inside space-y-2 mb-4 pl-4 text-gray-700'>" +
                     "<li><strong>Definition:</strong> 'To accept the past and move on from it.'</li>" +
                     "<li><strong>VFT Mechanism:</strong> The active, willing participation in the 'Heartbeat of Reality.' It is a 'solution-first' algorithm: <ol class='list-decimal list-inside ml-6 mt-1 space-y-1'><li><strong>Accept the Past (Resolve Problem)</strong> by integrating its negative energy.</li><li><strong>Move On (Generate Solution)</strong> by applying creative Will (+ψ) to build a new, lower-strain future.</li></ol></li>" +
                     "<li><strong>Hegemonic Map:</strong> This is the 'Path to Grace,' aligning with the <strong>Greater Good</strong> quadrant <code>(+υ, +ψ)</code>. It is the engine of <strong>Progress</strong>.</li>" +
                     "</ul>" +
                     "<h5 class='font-semibold text-lg text-red-700 mb-2'>2. Pessimism (Problems): The High-Strain, 'Problem-First' Mode</h5>" +
                     "<ul class='list-disc list-inside space-y-2 pl-4 text-gray-700'>" +
                     "<li><strong>Definition:</strong> 'To only consider the past.'</li>" +
                     "<li><strong>VFT Mechanism:</strong> The refusal to engage with the generative 'Heartbeat of Reality.' Consciousness gets trapped in a high-inertia, negative feedback loop, constantly reprocessing a high-strain past event ('problem'). This is the 'Circle of Questioning' on the 'Path of Delusion': answering a problem with another problem.</li>" +
                     "<li><strong>Hegemonic Map:</strong> This is the 'Path of Regression,' aligning with the <strong>Greater Evil</strong> quadrant <code>(-υ, -ψ)</code>. It is the engine of <strong>Stagnation</strong>.</li>" +
                     "</ul></div>"
        },
        { title: "The 7 Classical Virtues (The Base Code of Good)", content: "<p class='mb-4'>These are the 7 foundational energies <em>from which</em> the Optimistic Matrix is generated. They are the 'base code' of 'Good', divided into Theological (Mind/Conceptual) and Cardinal (Body/Physical) virtues.</p><div class='grid grid-cols-1 md:grid-cols-2 gap-4'><ol class='list-decimal space-y-3 list-inside'><li><strong>Faith:</strong> Belief in the unseen; the substance of things hoped for, the evidence of things not seen.</li><li><strong>Hope:</strong> The intellectual and spiritual conviction in a positive, achievable, and <em>True</em> future outcome.</li><li><strong>Charity (Love):</strong> The <em>agape</em> or divine, ordering love; the selfless, unconditional connection to the 'Other'.</li><li><strong>Prudence:</strong> Practical wisdom; the ability to discern the correct path of action ('right reason in action').</li></ol><ol class='list-decimal space-y-3 list-inside' start='5'><li><strong>Justice:</strong> Fairness, righteousness, and the internal compass for determining what is 'due' to oneself and others.</li><li><strong>Fortitude (Courage):</strong> The strength to face objective facts, withstand adversity, and act correctly.</li><li><strong>Temperance:</strong> Self-control, moderation, and the mastery of one's own internal state and passions.</li></ol></div>" },
        { title: "The 7 Deadly Sins (The Base Code of Bad)", content: "<p class='mb-4'>These are the 7 foundational energies <em>from which</em> the Pessimistic Matrix is generated. They are the 'base code' of 'Bad', divided into Spiritual (Fallen Mind) and Carnal (Corrupted Body) sins.</p><div class='grid grid-cols-1 md:grid-cols-2 gap-4'><ol class='list-decimal space-y-3 list-inside'><li><strong>Pride:</strong> The belief that one's <em>internal abstraction</em> is superior to the <em>external, objective Truth</em>. (Perversion of Faith/Prudence)</li><li><strong>Envy:</strong> The sorrow for another's good, based on the belief that it diminishes one's own. (Perversion of Charity/Justice)</li><li><strong>Wrath:</strong> The desire for vengeance or uncontrolled anger, rejecting Justice in favor of emotional excess. (Perversion of Patience/Temperance)</li><li><strong>Sloth:</strong> Apathy and the refusal to <em>act</em> or face the difficulty of objective reality; a failure of courage. (Perversion of Fortitude)</li></ol><ol class='list-decimal space-y-3 list-inside' start='5'><li><strong>Greed:</strong> The desire to acquire or possess more than one needs, disrupting moral balance. (Perversion of Justice)</li><li><strong>Gluttony:</strong> The over-consumption of anything to the point of waste; a failure of self-control. (Perversion of Temperance)</li><li><strong>Lust:</strong> The disordered desire for or inordinate enjoyment of sexual pleasure, reducing a person (the 'Other') to an object. (Perversion of Charity/Love)</li></ol></div>" },
        { title: "The 16 Synthesized Optimisms (The Process of Good)", content: "<p class='mb-4'>The 7 Classical Virtues combine and express themselves to create the 16 states of 'Good' that form the nodes of the Optimism Matrix. All 16 nodes are <strong>synthesized expressions</strong> of the base code.</p><ol class='list-decimal space-y-2 list-inside'><li><strong>Maths (Order):</strong> `Prudence` expressed as foundational logic.</li><li><strong>Spirituality (Faith):</strong> `Faith` expressed in the abstract; the <em>search</em> for unseen meaning.</li><li><strong>Religion (Charity):</strong> `Charity` (Love) expressed as an applied structure of moral order.</li><li><strong>Intelligence (Hope):</strong> `Hope` expressed as the final synthesis; the <em>conviction</em> in a positive, integrated Truth.</li><li><strong>Physics (Objectivity):</strong> `Fortitude` expressed as the acceptance of objective fact.</li><li><strong>Meta-Physics (Imagination):</strong> `Faith` + `Prudence`; the disciplined exploration of possibility.</li><li><strong>Emotional-physics (Temperance):</strong> `Temperance` expressed as the applied rules of internal mastery.</li><li><strong>Learning (Prudence):</strong> `Prudence` expressed as the final synthesis; the <em>process</em> of subjective modeling.</li><li><strong>Society (Community):</strong> `Justice` expressed as an applied collective structure.</li><li><strong>Sociology (Empathy):</strong> `Charity` + `Justice`; the disciplined understanding of the 'Other\'s' state.</li><li><strong>Internal Judgment (Justice):</strong> `Justice` expressed as the applied moral compass.</li><li><strong>The World (Fortitude):</strong> `Fortitude` expressed as the final synthesis; the sum of all objective facts to be faced.</li><li><strong>Psychology (Understanding):</strong> `Temperance` + `Prudence`; the synthesis of self-knowledge.</li><li><strong>Language (Connection):</strong> `Charity` + `Justice`; the synthesis of shared meaning.</li><li><strong>History (Context):</strong> `Fortitude` + `Faith`; the grounded record of action.</li><li><strong>Reality (Truth):</strong> The final, grand synthesis of all 7 virtues in perfect, integrated alignment.</li></ol>" },
        { title: "The 16 Synthesized Pessimisms (The Process of Bad)", content: "<p class='mb-4'>The 7 Deadly Sins combine and express themselves to create the 16 states of 'Bad' that form the nodes of the Pessimism Matrix. All 16 nodes are <strong>synthesized expressions</strong> of the base code.</p><ol class='list-decimal space-y-2 list-inside'><li><strong>Chaos (Maths):</strong> `Sloth` + `Pride`; the rejection of foundational structure.</li><li><strong>Nihilism (Spirituality):</strong> `Pride` expressed in the abstract; the <em>belief</em> in nothing (perversion of Faith).</li><li><strong>Hatred (Religion):</strong> `Wrath` + `Envy`; the applied structure of active ill-will (perversion of Charity).</li><li><strong>Despair (Intelligence):</strong> `Pride` + `Sloth`; the synthesized conviction in a negative, unavoidable outcome (perversion of Hope).</li><li><strong>Denial (Physics):</strong> `Pride` + `Cowardice`; the rejection of objective fact.</li><li><strong>Dogma (Meta-Physics):</strong> `Pride` expressed as a closed mind; the <em>inability</em> to explore possibility (perversion of Faith + Prudence).</li><li><strong>Indulgence (Emotional-physics):</strong> `Gluttony` + `Lust`; the applied lack of internal control (perversion of Temperance).</li><li><strong>Folly (Learning):</strong> `Pride` + `Sloth`; the synthesized process of willful ignorance (perversion of Prudence).</li><li><strong>Anarchy (Society):</strong> `Wrath` + `Greed`; the dissolution of collective structure (perversion of Justice).</li><li><strong>Apathy (Sociology):</strong> `Sloth` + `Envy`; the refusal to understand or care about the 'Other\'s' state (perversion of Charity + Justice).</li><li><strong>Corruption (Internal Judgment):</strong> `Greed` + `Envy`; the applied perversion of the moral compass (perversion of Justice).</li><li><strong>Cowardice (The World):</strong> `Sloth` expressed as the final synthesis; the refusal to face facts (perversion of Fortitude).</li><li><strong>Confusion (Psychology):</strong> `Gluttony` + `Folly`; the synthesis of self-ignorance (perversion of Temperance + Prudence).</li><li><strong>Deceit (Language):</strong> `Lust` + `Envy` + `Greed`; the <em>language of objectification</em> (perversion of Charity + Justice).</li><li><strong>Erasure (History):</strong> `Pride` + `Sloth`; the destruction or denial of the grounded record (perversion of Fortitude + Faith).</li><li><strong>Delusion (Reality):</strong> The final, grand synthesis of all 7 sins; the 'Greater Lie.'</li></ol>" },
        { title: "The Meta-Optimism & Meta-Pessimism (The Will States)", content: "<p class='mb-3'>This section defines the energetic states governing the system's traversal, representing the expression of <strong>Will</strong>.</p><strong>Patience (Meta-Optimism):</strong> The energy of traversal. The process of 'balance' and the <em>willingness</em> to follow the arduous 'Grounded Integration' path ('Mastery Path') rather than taking an abstract shortcut.<br><br><strong>Impatience (Meta-Pessimism):</strong> The energy of the 'Fall'. The <em>desire for a shortcut</em> to `Reality`, which fuels the 'Ungrounded Abstraction' path, trapping the system in high-Pessimism computational loops (the 'Learner Trap')." }
    ]
};

let currentMatrixState = 'optimism';
let simInProgress = false;

document.addEventListener('DOMContentLoaded', () => {
    setupNavigation();
    setupMatrixControls();
    renderMatrix(currentMatrixState);
    renderDefinitions();
    renderCombinedView();
    // Initialize detail panel with a default state, e.g., Maths (0,0)
    const firstCell = document.querySelector('#matrix-grid-container .matrix-cell:not(.y-axis-header)');
    if(firstCell && data.details[currentMatrixState] && data.details[currentMatrixState][0] && data.details[currentMatrixState][0][0]){
        showDetail(currentMatrixState, 0, 0, firstCell);
    } else {
         console.error("Default detail state not found or first cell not found");
    }
});

function setupNavigation() {
    const navLinks = document.querySelectorAll('#main-nav a');
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('data-target');
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                document.querySelectorAll('#main-nav a').forEach(l => l.classList.remove('active'));
                link.classList.add('active');

                document.querySelectorAll('[data-section]').forEach(s => s.classList.remove('active'));
                targetElement.classList.add('active');
            } else {
                 console.error(`Navigation target section with ID "${targetId}" not found.`);
            }
        });
    });
}

function renderCombinedView() {
    // 1. Invert Optimism Data
    const invertedOptimismMatrix = [...data.matrix.optimism].reverse().map(row => [...row].reverse());
    const invertedOptimismHeaders = [...data.headers.optimism].reverse();
    const invertedPlaneHeaders = ["Plane 3 (Why)", "Plane 2 (How)", "Plane 1 (Where)", "Plane 0 (What)"];
    const planeHeaders = ["What", "Where", "How", "Why"];
    const setHeaders = data.headers.optimism.map(h => h.split(' ')[1].replace('(', '').replace(')', '')); // ["What", "How", "Where", "Why"]
    const invertedSetHeaders = [...setHeaders].reverse();

    // 2. Populate Inverted Optimism Grid
    const optimismGrid = document.getElementById('matrix-grid-optimism-inv');
    if (optimismGrid) {
        optimismGrid.innerHTML = '';
        invertedOptimismMatrix.forEach((row, r) => {
            // Add Y-Axis Header
            const headerEl = document.createElement('div');
            headerEl.className = 'y-axis-header flex items-center justify-end text-right text-xs font-semibold text-gray-500 uppercase pr-2';
            headerEl.innerHTML = invertedOptimismHeaders[r].replace(" (", "<br>(");
            optimismGrid.appendChild(headerEl);

            row.forEach((cell, c) => {
                const cellEl = document.createElement('div');
                cellEl.className = 'matrix-cell optimism-cell bg-white border-gray-200 border rounded-xl flex flex-col items-center justify-center p-2 text-center font-semibold text-sm';
                cellEl.style.cursor = 'default';
                const xLabel = invertedPlaneHeaders[c].split(' ')[2].replace('(', '').replace(')', ''); // Get "Why" from "Plane 3 (Why)"
                const yLabel = invertedSetHeaders[r];
                cellEl.innerHTML = `<span>${cell}</span><span class="block text-xs opacity-60 mt-1 font-normal">(${xLabel}, ${yLabel})</span>`;
                optimismGrid.appendChild(cellEl);
            });
        });
    }

    // 3. Populate Inverted Optimism Headers
    const invColHeaderContainer = optimismGrid.parentElement.querySelector('.uppercase.mb-2');
    if(invColHeaderContainer) {
        invColHeaderContainer.innerHTML = '<span></span>' + invertedPlaneHeaders.map(h => `<span>${h.replace(" (", "<br>(")}</span>`).join('');
    }


    // 4. Populate Standard Pessimism Grid
    const pessimismGrid = document.getElementById('matrix-grid-pessimism-std');
    if (pessimismGrid) {
        pessimismGrid.innerHTML = '';
        data.matrix.pessimism.forEach((row, r) => {
            
            // Render the data cells first
            row.forEach((cell, c) => {
                const cellEl = document.createElement('div');
                cellEl.className = 'matrix-cell pessimism-cell bg-gray-800 text-white border-gray-700 border rounded-xl flex flex-col items-center justify-center p-2 text-center font-semibold text-sm';
                cellEl.style.cursor = 'default';
                const xLabel = planeHeaders[c];
                const yLabel = setHeaders[r];
                cellEl.innerHTML = `<span>${cell}</span><span class="block text-xs opacity-60 mt-1 font-normal">(${xLabel}, ${yLabel})</span>`;
                pessimismGrid.appendChild(cellEl);
            });

            // Add Y-Axis Header to the RIGHT
            const headerEl = document.createElement('div');
            headerEl.className = 'y-axis-header flex items-center justify-start text-left text-xs font-semibold text-gray-500 uppercase pl-2';
            headerEl.innerHTML = data.headers.pessimism[r].replace(" (", "<br>(");
            pessimismGrid.appendChild(headerEl);
        });
    }
    // 5. Populate Standard Pessimism Headers
    const standardPlaneHeaders = ["Plane 0<br>(What)", "Plane 1<br>(Where)", "Plane 2<br>(How)", "Plane 3<br>(Why)"];
    const pessimismGridContainer = document.getElementById('matrix-grid-pessimism-std');
    if (pessimismGridContainer) {
        const colHeaders = pessimismGridContainer.parentElement.querySelector('.uppercase.mb-2');
        // This is the change: map first, then add the blank span
        colHeaders.innerHTML = standardPlaneHeaders.map(h => `<span>${h}</span>`).join('') + '<span></span>';
    }
}

function setupMatrixControls() {
    const btnOptimism = document.getElementById('btn-optimism');
    const btnPessimism = document.getElementById('btn-pessimism');

    if (!btnOptimism || !btnPessimism) {
        console.error("Matrix toggle buttons not found");
        return; // Exit if buttons aren't found
    }

    btnOptimism.addEventListener('click', () => {
        if (currentMatrixState === 'optimism') return;
        currentMatrixState = 'optimism';
        btnOptimism.classList.add('active');
        btnPessimism.classList.remove('active');
        document.getElementById('matrix-title').textContent = "The Optimism Matrix (Solutions)";
        document.getElementById('matrix-description').textContent = "This matrix maps the 16 positive nodes of the 'Optimism Matrix' (Solutions) that define the path to `Reality (Truth)`. Click any cell to explore its properties.";
        renderMatrix(currentMatrixState);
        showDetail(currentMatrixState, 0, 0, document.querySelector('#matrix-grid-container .matrix-cell:not(.y-axis-header)')); // Show default detail
    });

    btnPessimism.addEventListener('click', () => {
        if (currentMatrixState === 'pessimism') return;
        currentMatrixState = 'pessimism';
        btnPessimism.classList.add('active');
        btnOptimism.classList.remove('active');
        document.getElementById('matrix-title').textContent = "The Pessimism Matrix (Problems)";
        document.getElementById('matrix-description').textContent = "This matrix maps the 16 shadow nodes of the 'Pessimism Matrix' (Problems), defining the 'Path of Delusion'. Click any cell to explore its properties.";
        renderMatrix(currentMatrixState);
        showDetail(currentMatrixState, 0, 0, document.querySelector('#matrix-grid-container .matrix-cell:not(.y-axis-header)')); // Show default detail
    });
}

function renderMatrix(state) {
    const grid = document.getElementById('matrix-grid-container');
    const matrixTitle = document.getElementById('matrix-title'); // For row headers
    if (!grid || !matrixTitle) {
         console.error("Matrix grid container or title element not found for rendering.");
         return;
    }
    grid.innerHTML = '';
    const cellClass = state === 'optimism' ? 'optimism-cell' : 'pessimism-cell';
    const bgClass = state === 'optimism' ? 'bg-white' : 'bg-gray-800 text-white';
    const borderClass = state === 'optimism' ? 'border-gray-200' : 'border-gray-700';
    
    const planeHeaders = ["What", "Where", "How", "Why"]; // X-Axis
    const setHeaders = data.headers[state].map(h => h.split(' ')[1].replace('(', '').replace(')', '')); // Y-Axis ["What", "How", "Where", "Why"]


    // Update column headers for the main matrix
    const planeHeaderStrings = ["Plane 0<br>(What)", "Plane 1<br>(Where)", "Plane 2<br>(How)", "Plane 3<br>(Why)"];
    const headerContainer = grid.parentElement.querySelector('.grid.grid-cols-5.gap-2.text-center.text-xs.font-semibold.text-gray-500.uppercase.mb-2');
    if (headerContainer) {
        headerContainer.innerHTML = '<span></span>'; // Clear existing headers and add blank
        planeHeaderStrings.forEach(headerText => {
            const span = document.createElement('span');
            span.innerHTML = headerText;
            headerContainer.appendChild(span);
        });
    }

    data.matrix[state].forEach((row, r) => {
        // Add Y-Axis Header Cell
        const headerEl = document.createElement('div');
        headerEl.className = 'y-axis-header flex items-center justify-end text-right text-xs font-semibold text-gray-500 uppercase pr-2';
        headerEl.innerHTML = data.headers[state][r].replace(" (", "<br>(");
        grid.appendChild(headerEl);

        row.forEach((cell, c) => {
            const cellEl = document.createElement('div');
            cellEl.className = `matrix-cell ${cellClass} ${bgClass} ${borderClass} border rounded-xl flex flex-col items-center justify-center p-2 text-center font-semibold text-sm md:text-base`;
            
            const xLabel = planeHeaders[c];
            const yLabel = setHeaders[r];
            cellEl.innerHTML = `<span>${cell}</span><span class="block text-xs opacity-60 mt-1 font-normal">(${xLabel}, ${yLabel})</span>`;
            
            cellEl.addEventListener('click', (e) => showDetail(state, r, c, e.currentTarget));
            grid.appendChild(cellEl);
        });
    });
}


function showDetail(state, r, c, el) {
    const detailTitle = document.getElementById('detail-title');
    const detailDescription = document.getElementById('detail-description');
    const content = document.getElementById('detail-content');

    if (!detailTitle || !detailDescription || !content) {
        console.error("Detail panel elements not found.");
        return;
    }
    
    // Remove highlight from all cells in this grid
    document.querySelectorAll('#matrix-grid-container .matrix-cell').forEach(cell => {
        cell.classList.remove('optimism-cell-active');
        cell.classList.remove('pessimism-cell-active');
    });

    // Add highlight to the clicked cell
    if (el) {
        const activeClass = state === 'optimism' ? 'optimism-cell-active' : 'pessimism-cell-active';
        el.classList.add(activeClass);
    }

     // Validate data access
    if (!data.details[state] || !data.details[state][r] || !data.details[state][r][c]) {
        console.error(`Detail data not found for state: ${state}, row: ${r}, col: ${c}`);
        detailTitle.innerHTML = "Error";
        detailDescription.innerHTML = "Details not available.";
        content.innerHTML = "";
        return;
    }

    const detail = data.details[state][r][c];
    const shadowState = state === 'optimism' ? 'pessimism' : 'optimism';

    // Validate shadow data access
    let shadowDetailTitle = "N/A";
    let shadowDetailCode = "N/A";

    if (data.details[shadowState] && data.details[shadowState][r] && data.details[shadowState][r][c]) {
        shadowDetailTitle = data.details[shadowState][r][c].title;
        shadowDetailCode = data.details[shadowState][r][c].code || "N/A";
    } else {
         console.warn(`Shadow detail data not found for state: ${shadowState}, row: ${r}, col: ${c}`);
    }

    // Generate 16 Sub-Vector connection list
    let subVectorList = '';
    data.matrix.optimism.flat().forEach((name, i) => {
        subVectorList += `<li class="text-xs ${i % 2 === 0 ? 'bg-gray-50' : 'bg-white'} p-1 rounded">${name}</li>`;
    });

    detailTitle.innerHTML = detail.title;
    detailDescription.innerHTML = detail.def;

    content.innerHTML = `
        <div class="text-sm">
            <span class="font-semibold text-gray-800">Set (Row):</span>
            <span class="text-gray-600">${detail.plane || 'N/A'}</span>
        </div>
        <div class="text-sm">
            <span class="font-semibold text-gray-800">Base Code:</span>
            <span class="text-gray-600">${detail.code || 'N/A'}</span>
        </div>
        <div class="text-sm">
            <span class="${state === 'optimism' ? 'text-green-600' : 'text-red-600'} font-medium">Type: ${state.charAt(0).toUpperCase() + state.slice(1)}</span>
        </div>
        <div class="text-sm pt-2 border-t border-gray-200">
            <span class="font-semibold text-gray-800">Shadow Counterpart:</span>
            <span class="text-gray-600">${shadowDetailTitle}</span>
        </div>
         <div class="text-sm">
            <span class="font-semibold text-gray-800">Shadow Code:</span>
            <span class="text-gray-600">${shadowDetailCode}</span>
        </div>
        
        <!-- Recursive 2x2 Truth Model Section -->
        <div class="pt-3 mt-3 border-t border-gray-200">
            <h4 class="font-semibold text-gray-800 text-sm mb-2">Recursive 2x2 Truth Model:</h4>
            <p class="text-xs text-gray-600 mb-2">Example Sub-Concept: <strong class="font-medium">"${detail.subConcept || 'Example'}"</strong></p>
            
            <div class="grid grid-cols-2 gap-1 text-xs text-center">
                <div class="bg-green-50 border border-green-200 p-2 rounded">
                    <span class="font-semibold text-green-700">True-True (Possible)</span><br>100
                </div>
                <div class="bg-yellow-50 border border-yellow-200 p-2 rounded">
                    <span class="font-semibold text-yellow-700">Lie-True (Ungrounded)</span><br>0
                </div>
                <div class="bg-blue-50 border border-blue-200 p-2 rounded">
                    <span class="font-semibold text-blue-700">True-Lie (Impossible)</span><br>100
                </div>
                <div class="bg-red-50 border border-red-200 p-2 rounded">
                    <span class="font-semibold text-red-700">Lie-Lie (Delusion)</span><br>0
                </div>
            </div>

            <h5 class="font-semibold text-gray-800 text-xs mt-3 mb-1">16 Connecting Sub-Vectors (MD Array)</h5>
            <div class="border border-gray-200 rounded p-2 h-24 overflow-y-auto bg-gray-50">
                <ul class="space-y-0.5">${subVectorList}</ul>
            </div>
        </div>
    `;
}


function renderDefinitions() {
    const container = document.getElementById('accordion-container');
    if (!container) {
         console.error("Accordion container not found.");
         return;
    }
    container.innerHTML = '';
    data.definitions.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden';
        const isOpen = index === 0; // Open the first item (Meta-Choice) by default
        div.innerHTML = `
            <button class="w-full p-5 text-left font-semibold text-lg text-gray-800 flex justify-between items-center hover:bg-gray-50" data-accordion-toggle="${index}">
                <span>${item.title}</span>
                <span class="transform transition-transform duration-200 text-sky-600 ${isOpen ? 'rotate-180' : ''}">▼</span>
            </button>
            <div class="p-5 pt-0 text-gray-600 ${isOpen ? '' : 'hidden'}" data-accordion-content="${index}">
                <div class="border-t border-gray-200 pt-4">${item.content}</div>
            </div>
        `;
        container.appendChild(div);
    });

    container.querySelectorAll('[data-accordion-toggle]').forEach(button => {
        button.addEventListener('click', () => {
            const content = container.querySelector(`[data-accordion-content="${button.dataset.accordionToggle}"]`);
            const arrow = button.querySelector('span:last-child');
            if(content && arrow){
                content.classList.toggle('hidden');
                arrow.classList.toggle('rotate-180');
            } else {
                 console.error("Accordion content or arrow not found for toggle:", button.dataset.accordionToggle);
            }
        });
    });
}

const sleep = (ms) => new Promise(res => setTimeout(res, ms));


</script>
</body>
</html>